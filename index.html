<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>나의 음주 수준 알아보기</title>
<style>
body{
  margin:0;
  font-family:'Pretendard','Noto Sans KR',sans-serif;
  background:linear-gradient(135deg,#f8f9fb,#e6ecf5);
  display:flex;
  align-items:center;
  justify-content:center;
  height:100vh;
}
.container{
  width:100%;
  max-width:480px;
  background:#fff;
  border-radius:20px;
  box-shadow:0 12px 30px rgba(0,0,0,0.08);
  padding:32px 28px;
  text-align:center;
}
.question{
  font-size:20px;
  font-weight:700;
  margin-bottom:24px;
  color:#222;
  line-height:1.4;
  animation:fadeIn 0.5s ease;
}
.choices{display:flex;flex-direction:column;gap:12px}
.choice{
  padding:14px 18px;
  border:1px solid #e0e4ea;
  border-radius:14px;
  background:#f9fafc;
  cursor:pointer;
  transition:all 0.25s;
  font-size:16px;
  color:#333;
}
.choice:hover{
  background:#edf2fb;
  border-color:#c9d6ff;
  transform:translateY(-2px);
  box-shadow:0 4px 10px rgba(0,0,0,0.05);
}
.progress{
  margin-top:28px;
  font-size:14px;
  color:#666;
  text-align:center;
}
.progress-bar{
  width:100%;
  height:8px;
  background:#f0f2f5;
  border-radius:5px;
  overflow:hidden;
  margin-top:10px;
}
.progress-fill{
  height:100%;
  background:linear-gradient(90deg,#6a85f1,#7ac8ff);
  width:0;
  transition:width 0.3s ease;
}
.result{
  display:none;
  text-align:center;
  padding:20px 10px;
  animation:fadeIn 0.5s ease;
}
.result-title{
  font-size:24px;
  font-weight:800;
  margin-bottom:12px;
  color:#2b2b2b;
}
.result-desc{
  font-size:15px;
  color:#555;
  line-height:1.5;
  margin-bottom:15px;
}
.more-info-btn {
  display: inline-block;
  padding: 10px 18px;
  background-color: #6a85f1;
  color: white;
  border-radius: 12px;
  cursor: pointer;
  font-weight: 700;
  transition: background-color 0.3s ease;
  user-select: none;
}
.more-info-btn:hover {
  background-color: #5473e2;
}

/* 팝업 오버레이 스타일 */
#popupOverlay {
  position: fixed;
  top:0; left:0; right:0; bottom:0;
  background: rgba(0,0,0,0.6);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
#popupContent {
  position: relative;
  background: white;
  border-radius: 10px;
  max-width: 90%;
  max-height: 90%;
  padding: 10px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.3);
}
#popupContent img {
  max-width: 90vw;
  max-height: 90vh;
  width: auto;
  height: auto;
  display: block;
  border-radius: 6px;
}
#popupClose {
  position: absolute;
  top: 5px;
  right: 10px;
  font-size: 24px;
  color: #333;
  cursor: pointer;
  user-select: none;
}
@keyframes fadeIn{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:translateY(0)}
}
</style>
</head>
<body>
<div class="container">
  <div id="quiz"></div>
  <div class="progress" id="progress"></div>
  <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>

  <div class="result" id="result">
    <h2 class="result-title" id="result-title"></h2>
    <p class="result-desc" id="result-desc"></p>
    <div><button class="more-info-btn" id="moreInfoBtn">더 많은 정보 알아보기</button></div>
  </div>
</div>

<!-- 팝업 오버레이 -->
<div id="popupOverlay">
  <div id="popupContent">
    <span id="popupClose">&times;</span>
    <img src="1.jpg" alt="더 많은 정보 이미지" />
  </div>
</div>

<script>
const questions = [
  {q:'술은 얼마나 자주 마십니까?', choices:['전혀 마시지 않는다','한달에 한 번 이하','한달에 2~4회','1주일에 2~3회','1주일에 4회 이상']},
  {q:'평소 술을 마시는 날 몇 잔 정도 마십니까?', choices:['1~2잔','3~4잔','5~6잔','7~9잔','10잔 이상']},
  {q:'한 번의 술자리에서 많은 양(소주 1병 이상 또는 맥주 4캔 이상)을 마시는 빈도는 얼마나 됩니까?', choices:['전혀 없다','한달에 한 번 미만','한달에 한 번','일주일에 한 번','매일 같이']},
  {q:'지난 1년 동안, 술을 마시기 시작하면 중간에 멈추기 어려웠던 적이 얼마나 자주 있었습니까?', choices:['전혀 없다','한달에 한 번 미만','한달에 한 번','일주일에 한 번','매일 같이']},
  {q:'지난 1년 동안, 음주 때문에 해야 할 일을 하지 못한 적이 얼마나 자주 있었습니까?', choices:['전혀 없다','한달에 한 번 미만','한달에 한 번','일주일에 한 번','매일 같이']},
  {q:'지난 1년 동안, 전날 술을 마신 후 해장 술이 필요했던 적이 얼마나 자주 있었습니까?', choices:['전혀 없다','한달에 한 번 미만','한달에 한 번','일주일에 한 번','매일 같이']},
  {q:'지난 1년 동안, 음주 후 죄책감이나 후회를 느낀 적이 얼마나 자주 있었습니까?', choices:['전혀 없다','한달에 한 번 미만','한달에 한 번','일주일에 한 번','매일 같이']},
  {q:'지난 1년 동안, 음주 후 전날 밤의 일이 기억나지 않았던 적이 얼마나 자주 있었습니까?', choices:['전혀 없다','한달에 한 번 미만','한달에 한 번','일주일에 한 번','매일 같이']},
  {q:'음주로 인해 자신이나 다른 사람이 다친 적이 있었습니까?', choices:['없었다','있지만 지난 1년간 없었다','지난 1년 내 있었다']},
  {q:'가족, 친구, 혹은 의료인이 당신의 음주에 대해 걱정하거나 줄이도록 권유한 적이 있었습니까?', choices:['없었다','있지만 지난 1년간 없었다','지난 1년 내 있었다']}
];

const results = [
  {title:'정상', desc:'0점인 경우 표시'},
  {title:'저위험 음주 단계', desc:'남자1~9점, 여자1~5점'},
  {title:'고위험 음주 단계', desc:'남자10~19점, 여자6~9점'},
  {title:'알코올 사용 장애 단계', desc:'남자20점 이상, 여자10점 이상'}
];

let current = 0;
let scores = [];
let gender = '';

const quiz = document.getElementById('quiz');
const progress = document.getElementById('progress');
const progressFill = document.getElementById('progressFill');
const resultEl = document.getElementById('result');
const resultTitle = document.getElementById('result-title');
const resultDesc = document.getElementById('result-desc');
const moreInfoBtn = document.getElementById('moreInfoBtn');
const popupOverlay = document.getElementById('popupOverlay');
const popupClose = document.getElementById('popupClose');

moreInfoBtn.onclick = () => {
  popupOverlay.style.display = 'flex';
};
popupClose.onclick = () => {
  popupOverlay.style.display = 'none';
};
popupOverlay.onclick = (e) => {
  if(e.target === popupOverlay){
    popupOverlay.style.display = 'none';
  }
};

function render(){
  if(!gender){
    quiz.innerHTML = `<div class="question">성별을 선택해주세요</div>`;
    const cWrap = document.createElement('div');
    cWrap.className = 'choices';
    ['남자','여자'].forEach(g=>{
      const btn = document.createElement('div');
      btn.className = 'choice';
      btn.textContent = g;
      btn.onclick = () => { 
        gender = g; 
        render(); 
      };
      cWrap.appendChild(btn);
    });
    quiz.appendChild(cWrap);
    progress.textContent = '';
    progressFill.style.width = '0';
    resultEl.style.display = 'none';
    return;
  }

  if(current < questions.length){
    const q = questions[current];
    quiz.innerHTML = `<div class="question">${q.q}</div>`;
    const cWrap = document.createElement('div');
    cWrap.className = 'choices';
    q.choices.forEach((choice, i)=>{
      const btn = document.createElement('div');
      btn.className = 'choice';
      btn.textContent = choice;
      btn.onclick = ()=>{
        scores.push(i);
        current++;
        render();
      };
      cWrap.appendChild(btn);
    });
    quiz.appendChild(cWrap);
    progress.textContent = `${current+1} / ${questions.length}`;
    progressFill.style.width = `${Math.min((current/questions.length)*100,100)}%`;
    resultEl.style.display = 'none';
  } else {
    showResult();
  }
}

function showResult(){
  quiz.innerHTML = '';
  progress.textContent = '';
  progressFill.style.width = '100%';
  resultEl.style.display = 'block';
  const sum = scores.reduce((a,b)=>a+b,0);
  let idx = 0;

  if(sum===0){
    idx = 0;
  } else if((gender==='남자' && sum>=1 && sum<=9) || (gender==='여자' && sum>=1 && sum<=5)){
    idx = 1;
  } else if((gender==='남자' && sum>=10 && sum<=19) || (gender==='여자' && sum>=6 && sum<=9)){
    idx = 2;
  } else if((gender==='남자' && sum>=20) || (gender==='여자' && sum>=10)){
    idx = 3;
  }

  const res = results[idx];
  resultTitle.textContent = res.title;
  resultDesc.textContent = res.desc;
}

render();
</script>
</body>
</html>
